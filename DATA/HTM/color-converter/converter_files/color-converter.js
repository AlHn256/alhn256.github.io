$(function(){function e(a){a="undefined"!==typeof a?a:$("#cc_type").val();for(var b=[],c=0,f=x[a].length;c<f;c++)b[c]=$(x[a][c]).val();if(b=H(b,a)){a=b.type;for(var c=0,f=k.length;c<f;c++){for(var d=0,l=x[k[c]].length;d<l;d++)k[c]!=a&&$(x[k[c]][d]).val(b[k[c]][d]);x[k[c]]=$("#cc_"+k[c]).find("input")}$("#cc_color").css("background","#"+b.hex[0]);$("#cc_item_hex").val("#"+b.hex[0]);$("#cc_item_websafe").val("#"+b.websafe);$("#cc_item_rgb").val("rgb("+b.rgb[0]+", "+b.rgb[1]+", "+b.rgb[2]+");");$("#cc_item_rgba").val("rgba("+b.rgba[0]+", "+b.rgba[1]+", "+b.rgba[2]+", "+b.rgba[3]+");");$("#cc_item_prgb").val("rgb("+b.prgb[0]+"%, "+b.prgb[1]+"%, "+b.prgb[2]+"%);");$("#cc_item_prgba").val("rgb("+b.prgba[0]+"%, "+b.prgba[1]+"%, "+b.prgba[2]+"%, "+b.prgba[3]+");");$("#cc_item_hsl").val("hsl("+b.hsl[0]+", "+b.hsl[1]+"%, "+b.hsl[2]+"%);");$("#cc_item_hsla").val("hsla("+b.hsla[0]+", "+b.hsla[1]+"%, "+b.hsla[2]+"%, "+b.hsla[3]+");");$("#cc_item_hsb").val(b.hsb[0]+", "+b.hsb[1]+"%, "+b.hsb[2]+"%");$("#cc_item_xyz").val(b.xyz[0]+", "+b.xyz[1]+", "+b.xyz[2]);$("#cc_item_lab").val(b.lab[0]+", "+b.lab[1]+", "+b.lab[2]);$("#cc_item_cmyk").val(b.cmyk[0]+"%, "+b.cmyk[1]+"%, "+b.cmyk[2]+"%, "+b.cmyk[3]+"%")}else{$("#cc_color").css("background-image","url(/img/grid16.png)");c=0;for(f=k.length;c<f;c++)$("#cc_item_"+k[c]).val("");$("#cc_item_websafe").val("")}}function H(a,b){function c(a,d,b){return"NaN"!=a&&a>=d&&a<=b?!0:!1}var f,d,l,m,e,E,p,g,k,q,A,B;switch(b){case "hex":if(1==a.length){var x=a[0].match(/^#?([0-9a-fA-F]{3,6})$/);!x||3!=x[1].length&&6!=x[1].length||(f=x[1],d=I(f),l=s(d),m=y(d),e=z(d),E=n(d),p=v(d),g=F(p),k=t(d),q=h(d),A=C(q),B=D(d))}break;case "rgb":3==a.length&&(a[0]=parseInt(a[0]),a[1]=parseInt(a[1]),a[2]=parseInt(a[2]),c(a[0],0,255)&&c(a[1],0,255)&&c(a[2],0,255)&&(d=[a[0],a[1],a[2]],m=y(d),l=s(d),e=z(d),f=w(d),E=n(d),p=v(d),g=F(p),k=t(d),q=h(d),A=C(q),B=D(d)));break;case "rgba":4==a.length&&(a[0]=parseInt(a[0]),a[1]=parseInt(a[1]),a[2]=parseInt(a[2]),c(a[0],0,255)&&c(a[1],0,255)&&c(a[2],0,255)&&(a[3]=parseFloat(a[3])||1,1<a[3]?a[3]=1:0>a[3]&&(a[3]=0),l=[a[0],a[1],a[2],a[3]],d=r(l),m=y(d),e=R(l),f=w(d),E=n(d),p=v(d),g=L(l),k=t(d),q=h(d),A=C(q),B=D(d)));break;case "prgb":3==a.length&&(a[0]=parseFloat(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),c(a[0],0,100)&&c(a[1],0,100)&&c(a[2],0,100)&&(m=[a[0],a[1],a[2]],d=G(m),l=s(d),e=z(d),f=w(d),E=n(d),p=v(d),g=F(p),k=t(d),q=h(d),A=C(q),B=D(d)));break;case "prgba":4==a.length&&(a[0]=parseFloat(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),c(a[0],0,100)&&c(a[1],0,100)&&c(a[2],0,100)&&(a[3]=parseFloat(a[3])||1,1<a[3]?a[3]=1:0>a[3]&&(a[3]=0),e=[a[0],a[1],a[2],a[3]],l=S(e),d=r(l),m=y(d),f=w(d),E=n(d),p=v(d),g=L(l),k=t(d),q=h(d),A=C(q),B=D(d)));break;case "hsl":3==a.length&&(a[0]=parseInt(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),c(a[0],0,360)&&c(a[1],0,100)&&c(a[2],0,100)&&(p=[a[0],a[1],a[2]],d=J(p),l=s(d),m=y(d),e=z(d),E=n(d),f=w(d),g=F(p),k=t(d),q=h(d),A=C(q),B=D(d)));break;case "hsla":4==a.length&&(a[0]=parseInt(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),c(a[0],0,360)&&c(a[1],0,100)&&c(a[2],0,100)&&(a[3]=parseFloat(a[3])||1,1<=a[3]?a[3]=1:0>=a[3]&&(a[3]=0),g=[a[0],a[1],a[2],a[3]],l=N(g),d=r(l),p=v(d),m=y(d),e=z(d),E=n(d),f=w(d),k=t(d),q=h(d),A=C(q),B=D(d)));break;case "cmyk":4==a.length&&(a[0]=parseFloat(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),a[3]=parseFloat(a[3]),c(a[0],0,100)&&c(a[1],0,100)&&c(a[2],0,100)&&c(a[3],0,100)&&(B=[a[0],a[1],a[2],a[3]],d=O(B),f=w(d),l=s(d),m=y(d),e=z(d),E=n(d),p=v(d),g=F(p),k=t(d),q=h(d),A=C(q)));break;case "hsb":3==a.length&&(a[0]=parseInt(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),c(a[0],0,360)&&c(a[1],0,100)&&c(a[2],0,100)&&(k=[a[0],a[1],a[2]],d=u(k),f=w(d),l=s(d),m=y(d),e=z(d),E=n(d),p=v(d),g=F(p),q=h(d),A=C(q),B=D(d)));break;case "xyz":3==a.length&&(a[0]=parseFloat(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),c(a[0],0,95.05)&&c(a[1],0,100)&&c(a[2],0,108.88)&&(q=[a[0],a[1],a[2]],d=Q(q),f=w(d),l=s(d),m=y(d),e=z(d),E=n(d),p=v(d),g=F(p),B=D(d),k=t(d),A=C(q)));break;case "lab":3==a.length&&(a[0]=parseFloat(a[0]),a[1]=parseFloat(a[1]),a[2]=parseFloat(a[2]),c(a[0],0,100)&&c(a[1],-128,128)&&c(a[2],-128,128)&&(A=[a[0],a[1],a[2]],q=P(A),d=Q(q),f=w(d),l=s(d),m=y(d),e=z(d),E=n(d),p=v(d),g=F(p),B=D(d),k=t(d)))}return f?{type:b,hex:[f],rgb:d,rgba:l,prgb:m,prgba:e,websafe:E,hsl:p,hsla:g,cmyk:B,hsb:k,xyz:q,lab:A}:!1}function g(a,b,c){b=parseInt($("#cc_precision").val());0>b&&(b=0);9<b&&(b=9);var f,d,l;b=Math.pow(10,b|0);a*=b;l=0<a|-(0>a);d=a%1===.5*l;f=Math.floor(a);if(d)switch(c){case "PHP_ROUND_HALF_DOWN":a=f+(0>l);break;case "PHP_ROUND_HALF_EVEN":a=f+f%2*l;break;case "PHP_ROUND_HALF_ODD":a=f+!(f%2);break;default:a=f+(0<l)}return(d?a:Math.round(a))/b}function I(a){"#"===a.charAt(0)&&(a=a.substr(1));var b=a;3==b.length&&(b=b.charAt(0)+b.charAt(0)+b.charAt(1)+b.charAt(1)+b.charAt(2)+b.charAt(2));a=b;if(3>a.length||6<a.length)return!1;var b=a.split(""),c;if(2===a.length)b=c=a=parseInt(b[0].toString()+b[1].toString(),16);else if(3===a.length)a=parseInt(b[0].toString(),16),c=parseInt(b[1].toString(),16),b=parseInt(b[2].toString(),16);else if(6===a.length)a=parseInt(b[0].toString()+b[1].toString(),16),c=parseInt(b[2].toString()+b[3].toString(),16),b=parseInt(b[4].toString()+b[5].toString(),16);else return!1;return[a,c,b]}function w(a){var b=Math.max(Math.min(parseInt(a[0],10),255),0),c=Math.max(Math.min(parseInt(a[1],10),255),0);a=Math.max(Math.min(parseInt(a[2],10),255),0);b=15<b?b.toString(16):"0"+b.toString(16);c=15<c?c.toString(16):"0"+c.toString(16);a=15<a?a.toString(16):"0"+a.toString(16);return b+c+a}function v(a){var b=Math.max(Math.min(parseInt(a[0],10)/255,1),0),c=Math.max(Math.min(parseInt(a[1],10)/255,1),0),f=Math.max(Math.min(parseInt(a[2],10)/255,1),0),d=Math.max(b,c,f),l=Math.min(b,c,f);a=(d+l)/2;var m;d!==l?(m=d-l,l=.5<a?m/(2-d-l):m/(d+l),b=(d===b?(c-f)/m+(c<f?6:0):d===c?(f-b)/m+2:(b-c)/m+4)/6):b=l=0;return[Math.round(360*b),g(100*l),g(100*a)]}function J(a){var b=Math.max(Math.min(parseInt(a[0],10),360),0)/360,c=Math.max(Math.min(parseInt(a[1],10),100),0)/100;a=Math.max(Math.min(parseInt(a[2],10),100),0)/100;var f,d,c=.5>=a?a*(1+c):a+c-a*c;if(0===c)return[0,0,0];a=2*a-c;b*=6;f=Math.floor(b);b=(c-a)/c*c*(b-f);switch(f){case 1:f=c-b;d=c;c=a;break;case 2:f=a;d=c;c=a+b;break;case 3:f=a;d=c-b;break;case 4:f=a+b;d=a;break;case 5:f=c;d=a;c-=b;break;default:f=c,d=a+b,c=a}return[Math.round(255*f),Math.round(255*d),Math.round(255*c)]}function t(a){var b,c,f=a[0]/255,d=a[1]/255,l=a[2]/255,m,e,h=Math.max(f,d,l);c=h-Math.min(f,d,l);0==c?m=e=0:(e=c/h,a=(h-f)/6/c+.5,b=(h-d)/6/c+.5,c=(h-l)/6/c+.5,f===h?m=c-b:d===h?m=1/3+a-c:l===h&&(m=2/3+b-a),0>m?m+=1:1<m&&(m-=1));return[Math.round(360*m),g(100*e),g(100*h)]}function u(a){var b=a[0]/60,c=a[1]/100;a=a[2]/100;var f=Math.floor(b)%6,d,l=b-Math.floor(b),b=255*a*(1-c),m=255*a*(1-c*l),c=255*a*(1-c*(1-l));a*=255;0==f?d=[a,c,b]:1==f?d=[m,a,b]:2==f?d=[b,a,c]:3==f?d=[b,m,a]:4==f?d=[c,b,a]:5==f&&(d=[a,b,m]);return[Math.round(d[0]),Math.round(d[1]),Math.round(d[2])]}function h(a){var b=a[0]/255,c=a[1]/255;a=a[2]/255;b=.04045<b?Math.pow((b+.055)/1.055,2.4):b/12.92;c=.04045<c?Math.pow((c+.055)/1.055,2.4):c/12.92;a=.04045<a?Math.pow((a+.055)/1.055,2.4):a/12.92;var f=.2126*b+.7152*c+.0722*a,d=.0193*b+.1192*c+.9505*a;return[g(100*(.4124*b+.3576*c+.1805*a)),g(100*f),g(100*d)]}function Q(a){var b=a[0]/100,c=a[1]/100,f=a[2]/100,d;a=3.2406*b+-1.5372*c+-.4986*f;d=-.9689*b+1.8758*c+.0415*f;b=.0557*b+-.204*c+1.057*f;a=.0031308<a?1.055*Math.pow(a,1/2.4)-.055:a*=12.92;d=.0031308<d?1.055*Math.pow(d,1/2.4)-.055:d*=12.92;b=.0031308<b?1.055*Math.pow(b,1/2.4)-.055:b*=12.92;a=Math.min(Math.max(0,a),1);d=Math.min(Math.max(0,d),1);b=Math.min(Math.max(0,b),1);return[Math.round(255*a),Math.round(255*d),Math.round(255*b)]}function n(a){function b(a){return 15==a?"F":14==a?"E":13==a?"D":12==a?"C":11==a?"B":10==a?"A":""+a}var c=a[0],f=a[1];a=a[2];var d;d=c%51;c=b(Math.round((25<d?c+51-d:c-d)/17));d=f%51;d=25<d?f+51-d:f-d;f=b(Math.round(d/17));d=a%51;d=25<d?a+51-d:a-d;a=b(Math.round(d/17));return c+f+a}function r(a){var b=[255,255,255];1>a[3]&&(b=I($("#cc_bg_input").val()));return[Math.round((1-a[3])*b[0]+a[3]*a[0]),Math.round((1-a[3])*b[1]+a[3]*a[1]),Math.round((1-a[3])*b[2]+a[3]*a[2])]}function s(a){return[a[0],a[1],a[2],1]}function y(a){return[g(a[0]/2.55),g(a[1]/2.55),g(a[2]/2.55)]}function z(a){return[g(a[0]/2.55),g(a[1]/2.55),g(a[2]/2.55),1]}function G(a){return[Math.round(2.55*a[0]),Math.round(2.55*a[1]),Math.round(2.55*a[2])]}function R(a){return[g(a[0]/2.55),g(a[1]/2.55),g(a[2]/2.55),a[3]]}function S(a){return[Math.round(2.55*a[0]),Math.round(2.55*a[1]),Math.round(2.55*a[2]),a[3]]}function F(a){a.push(1);return a}function L(a){var b=v(a);b.push(a[3]);return b}function N(a){var b=J(a);b.push(a[3]);return b}function P(a){var b=a[0],c=a[1];a=a[2];var f,d,l;8>=b?(b=100*b/903.3,l=b/100*7.787+16/116):(b=100*Math.pow((b+16)/116,3),l=Math.pow(b/100,1/3));f=.008856>=f/95.047?f=95.047*(c/500+l-16/116)/7.787:95.047*Math.pow(c/500+l,3);d=.008859>=d/108.883?d=108.883*(l-a/200-16/116)/7.787:108.883*Math.pow(l-a/200,3);return[g(f),g(b),g(d)]}function C(a){var b=a[0],c=a[1];a=a[2];b/=95.047;c/=100;a/=108.883;b=.008856<b?Math.pow(b,1/3):7.787*b+16/116;c=.008856<c?Math.pow(c,1/3):7.787*c+16/116;a=.008856<a?Math.pow(a,1/3):7.787*a+16/116;b=500*(b-c);a=200*(c-a);return[g(116*c-16),g(b),g(a)]}function D(a){var b=a[0]/255,c=a[1]/255,f=a[2]/255;a=Math.min(1-b,1-c,1-f);c=(1-c-a)/(1-a);f=(1-f-a)/(1-a);return[g((1-b-a)/(1-a)*100||0),g(100*c||0),g(100*f||0),g(100*a||1)]}function O(a){var b=a[1]/100,c=a[2]/100,f=a[3]/100;a=1-Math.min(1,a[0]/100*(1-f)+f);b=1-Math.min(1,b*(1-f)+f);c=1-Math.min(1,c*(1-f)+f);return[Math.round(255*a),Math.round(255*b),Math.round(255*c)]}/chrome/i.test(navigator.userAgent)&&(HTMLInputElement.prototype.brokenSelectFunction=HTMLInputElement.prototype.select,HTMLInputElement.prototype.select=function(){setTimeout(function(a){return function(){a.brokenSelectFunction()}}(this),10)});var k="hex rgb rgba prgb prgba hsl hsla cmyk hsb lab xyz".split(" ");$("#cc_type").on("change keyup",function(){var a;a:{a=$("#cc_type").val();var b=k,c="";for(c in b)if(b[c]==a){a=!0;break a}a=!1}if(a)for(a=0,b=k.length;a<b;a++)k[a]!=$("#cc_type").val()?$("#cc_"+k[a]).hide():$("#cc_"+k[a]).show()});var x=[],K,M;K=0;for(M=k.length;K<M;K++)x[k[K]]=$("#cc_"+k[K]).find("input");$(".cc_input input").on("input keyup",function(){e()});$("#cc_precision").change(function(){e()});$("#cc_color").cp({layout:"hex",submit:0,colorScheme:"dark",color:{h:360,s:0,b:0},onBeforeShow:function(){$(".cp_hex").removeClass("cp_cc_bg");$(".cp_new_color").removeClass("cp_cc_bg");$(".cp_hex_field").removeClass("cp_cc_bg")},onChange:function(a,b,c,f,d){$("#cc_color").css("background","#"+b);$("#cc_hex_0").val(b);e("hex")}});$("#cc_bgcolor").cp({layout:"hex",submit:0,colorScheme:"dark",color:{h:360,s:0,b:100},onBeforeShow:function(){$(".cp_hex").addClass("cp_cc_bg");$(".cp_new_color").addClass("cp_cc_bg");$(".cp_hex_field").addClass("cp_cc_bg")},onChange:function(a,b,c,f,d){$("#cc_bgcolor").css("background-color","#"+b);$("#cc_bg_input").val(b);e()}})});(function(e){var H=function(){var u={showEvent:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},colorScheme:"light",color:"3289c7",livePreview:!0,flat:!1,layout:"full",submit:1,submitText:"OK",height:156},h=function(a,b){var c=v(a);e(b).data("cp").fields.eq(1).val(c.r).end().eq(2).val(c.g).end().eq(3).val(c.b).end()},g=function(a,b){e(b).data("cp").fields.eq(4).val(Math.round(a.h)).end().eq(5).val(Math.round(a.s)).end().eq(6).val(Math.round(a.b)).end()},n=function(a,b){e(b).data("cp").fields.eq(0).val(t(a))},r=function(a,b){e(b).data("cp").selector.css("backgroundColor","#"+t({h:a.h,s:100,b:100}));e(b).data("cp").selectorIndic.css({left:parseInt(e(b).data("cp").height*a.s/100,10),top:parseInt(e(b).data("cp").height*(100-a.b)/100,10)})},s=function(a,b){e(b).data("cp").hue.css("top",parseInt(e(b).data("cp").height-e(b).data("cp").height*a.h/360,10))},y=function(a,b){e(b).data("cp").currentColor.css("backgroundColor","#"+t(a))},z=function(a,b){e(b).data("cp").newColor.css("backgroundColor","#"+t(a))},G=function(a){a=e(this).parent().parent();var b;if(0<this.parentNode.className.indexOf("_hex")){b=a.data("cp");var f=this.value,u=6-f.length;if(0<u){for(var k=[],p=0;p<u;p++)k.push("0");k.push(f);f=k.join("")}b.color=b=I(f);h(b,a.get(0));g(b,a.get(0))}else 0<this.parentNode.className.indexOf("_hsb")?(a.data("cp").color=b=c({h:parseInt(a.data("cp").fields.eq(4).val(),10),s:parseInt(a.data("cp").fields.eq(5).val(),10),b:parseInt(a.data("cp").fields.eq(6).val(),10)}),h(b,a.get(0)),n(b,a.get(0))):(b=a.data("cp"),f=parseInt(a.data("cp").fields.eq(1).val(),10),u=parseInt(a.data("cp").fields.eq(2).val(),10),k=parseInt(a.data("cp").fields.eq(3).val(),10),f={r:Math.min(255,Math.max(0,f)),g:Math.min(255,Math.max(0,u)),b:Math.min(255,Math.max(0,k))},b.color=b=w(f),n(b,a.get(0)),g(b,a.get(0)));r(b,a.get(0));s(b,a.get(0));z(b,a.get(0));a.data("cp").onChange.apply(a.parent(),[b,t(b),v(b),a.data("cp").el,0])},H=function(a){e(this).parent().removeClass("cp_focus")},J=function(){e(this).parent().parent().data("cp").fields.parent().removeClass("cp_focus");e(this).parent().addClass("cp_focus")},F=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var b=e(this).parent().find("input").focus();a={el:e(this).parent().addClass("cp_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:a.pageY,field:b,val:parseInt(b.val(),10),preview:e(this).parent().parent().data("cp").livePreview};e(document).mouseup(a,N);e(document).mousemove(a,L)},L=function(a){a.data.field.val(Math.max(0,Math.min(a.data.max,parseInt(a.data.val-a.pageY+a.data.y,10))));a.data.preview&&G.apply(a.data.field.get(0),[!0]);return!1},N=function(a){G.apply(a.data.field.get(0),[!0]);a.data.el.removeClass("cp_slider").find("input").focus();e(document).off("mouseup",N);e(document).off("mousemove",L);return!1},P=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var b={cal:e(this).parent(),y:e(this).offset().top};e(document).on("mouseup touchend",b,D);e(document).on("mousemove touchmove",b,C);a="touchstart"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;G.apply(b.cal.data("cp").fields.eq(4).val(parseInt(360*(b.cal.data("cp").height-(a-b.y))/b.cal.data("cp").height,10)).get(0),[b.cal.data("cp").livePreview]);return!1},C=function(a){var b="touchmove"==a.type?a.originalEvent.changedTouches[0].pageY:a.pageY;G.apply(a.data.cal.data("cp").fields.eq(4).val(parseInt(360*(a.data.cal.data("cp").height-Math.max(0,Math.min(a.data.cal.data("cp").height,b-a.data.y)))/a.data.cal.data("cp").height,10)).get(0),[a.data.preview]);return!1},D=function(a){h(a.data.cal.data("cp").color,a.data.cal.get(0));n(a.data.cal.data("cp").color,a.data.cal.get(0));e(document).off("mouseup touchend",D);e(document).off("mousemove touchmove",C);return!1},O=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;var b={cal:e(this).parent(),pos:e(this).offset()};b.preview=b.cal.data("cp").livePreview;e(document).on("mouseup touchend",b,x);e(document).on("mousemove touchmove",b,k);"touchstart"==a.type?(pageX=a.originalEvent.changedTouches[0].pageX,a=a.originalEvent.changedTouches[0].pageY):(pageX=a.pageX,a=a.pageY);G.apply(b.cal.data("cp").fields.eq(6).val(parseInt(100*(b.cal.data("cp").height-(a-b.pos.top))/b.cal.data("cp").height,10)).end().eq(5).val(parseInt(100*(pageX-b.pos.left)/b.cal.data("cp").height,10)).get(0),[b.preview]);return!1},k=function(a){var b;"touchmove"==a.type?(pageX=a.originalEvent.changedTouches[0].pageX,b=a.originalEvent.changedTouches[0].pageY):(pageX=a.pageX,b=a.pageY);G.apply(a.data.cal.data("cp").fields.eq(6).val(parseInt(100*(a.data.cal.data("cp").height-Math.max(0,Math.min(a.data.cal.data("cp").height,b-a.data.pos.top)))/a.data.cal.data("cp").height,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(a.data.cal.data("cp").height,pageX-a.data.pos.left))/a.data.cal.data("cp").height,10)).get(0),[a.data.preview]);return!1},x=function(a){h(a.data.cal.data("cp").color,a.data.cal.get(0));n(a.data.cal.data("cp").color,a.data.cal.get(0));e(document).off("mouseup touchend",x);e(document).off("mousemove touchmove",k);return!1},K=function(a){a=e(this).parent();var b=a.data("cp").color;a.data("cp").origColor=b;y(b,a.get(0));a.data("cp").onSubmit(b,t(b),v(b),a.data("cp").el)},M=function(d){d.stopPropagation();d=e("#"+e(this).data("cpId"));d.data("cp").onBeforeShow.apply(this,[d.get(0)]);var c=e(this).offset(),f=c.top+this.offsetHeight,c=c.left,h=b(),u=d.width();c+u>h.l+h.w&&(c-=u);d.css({left:c-0+"px",top:f-220+"px"});!1!=d.data("cp").onShow.apply(this,[d.get(0)])&&d.show();e("html").mousedown({cal:d},a);d.mousedown(function(a){a.stopPropagation()})},a=function(b){!1!=b.data.cal.data("cp").onHide.apply(this,[b.data.cal.get(0)])&&b.data.cal.hide();e("html").off("mousedown",a)},b=function(){var a="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(a?document.documentElement.scrollLeft:document.body.scrollLeft),w:window.innerWidth||(a?document.documentElement.clientWidth:document.body.clientWidth)}},c=function(a){return{h:Math.min(360,Math.max(0,a.h)),s:Math.min(100,Math.max(0,a.s)),b:Math.min(100,Math.max(0,a.b))}},f=function(){var a=e(this).parent(),b=a.data("cp").origColor;a.data("cp").color=b;h(b,a.get(0));n(b,a.get(0));g(b,a.get(0));r(b,a.get(0));s(b,a.get(0));z(b,a.get(0))};return{init:function(a){a=e.extend({},u,a||{});if("string"==typeof a.color)a.color=I(a.color);else if(void 0!=a.color.r&&void 0!=a.color.g&&void 0!=a.color.b)a.color=w(a.color);else if(void 0!=a.color.h&&void 0!=a.color.s&&void 0!=a.color.b)a.color=c(a.color);else return this;return this.each(function(){if(!e(this).data("cpId")){var b=e.extend({},a);b.origColor=a.color;var c="collorpicker_"+parseInt(1E3*Math.random());e(this).data("cpId",c);c=e('<div class="cp"><div class="cp_color"><div class="cp_color_overlay1"><div class="cp_color_overlay2"><div class="cp_selector_outer"><div class="cp_selector_inner"></div></div></div></div></div><div class="cp_hue"><div class="cp_hue_arrs"><div class="cp_hue_larr"></div><div class="cp_hue_rarr"></div></div></div><div class="cp_new_color"></div><div class="cp_current_color"></div><div class="cp_hex_field"><div class="cp_field_letter">#</div><input type="text" maxlength="6" size="6" /></div><div class="cp_rgb_r cp_field"><div class="cp_field_letter">R</div><input type="text" maxlength="3" size="3" /><div class="cp_field_arrs"><div class="cp_field_uarr"></div><div class="cp_field_darr"></div></div></div><div class="cp_rgb_g cp_field"><div class="cp_field_letter">G</div><input type="text" maxlength="3" size="3" /><div class="cp_field_arrs"><div class="cp_field_uarr"></div><div class="cp_field_darr"></div></div></div><div class="cp_rgb_b cp_field"><div class="cp_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="cp_field_arrs"><div class="cp_field_uarr"></div><div class="cp_field_darr"></div></div></div><div class="cp_hsb_h cp_field"><div class="cp_field_letter">H</div><input type="text" maxlength="3" size="3" /><div class="cp_field_arrs"><div class="cp_field_uarr"></div><div class="cp_field_darr"></div></div></div><div class="cp_hsb_s cp_field"><div class="cp_field_letter">S</div><input type="text" maxlength="3" size="3" /><div class="cp_field_arrs"><div class="cp_field_uarr"></div><div class="cp_field_darr"></div></div></div><div class="cp_hsb_b cp_field"><div class="cp_field_letter">B</div><input type="text" maxlength="3" size="3" /><div class="cp_field_arrs"><div class="cp_field_uarr"></div><div class="cp_field_darr"></div></div></div><div class="cp_submit"></div></div>').attr("id",c);c.addClass("cp_"+b.layout+(b.submit?"":" cp_"+b.layout+"_ns"));"light"!=b.colorScheme&&c.addClass("cp_"+b.colorScheme);c.find("div.cp_submit").html(b.submitText).click(K);b.fields=c.find("input").change(G).blur(H).focus(J);c.find("div.cp_field_arrs").mousedown(F).end().find("div.cp_current_color").click(f);b.selector=c.find("div.cp_color").on("mousedown touchstart",O);b.selectorIndic=b.selector.find("div.cp_selector_outer");b.el=this;b.hue=c.find("div.cp_hue_arrs");huebar=b.hue.parent();var u=navigator.userAgent.toLowerCase(),k="Microsoft Internet Explorer"===navigator.appName,p=k?parseFloat(u.match(/msie ([0-9]{1,}[\.0-9]{0,})/)[1]):0,u="#ff0000 #ff0080 #ff00ff #8000ff #0000ff #0080ff #00ffff #00ff80 #00ff00 #80ff00 #ffff00 #ff8000 #ff0000".split(" ");if(k&&10>p)for(k=0;11>=k;k++)p=e("<div></div>").attr("style","height:8.333333%; filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr="+u[k]+", endColorstr="+u[k+1]+'); -ms-filter: "progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr='+u[k]+", endColorstr="+u[k+1]+')";'),huebar.append(p);else stopList=u.join(","),huebar.attr("style","background:-webkit-linear-gradient(top,"+stopList+"); background: -o-linear-gradient(top,"+stopList+"); background: -ms-linear-gradient(top,"+stopList+"); background:-moz-linear-gradient(top,"+stopList+"); -webkit-linear-gradient(top,"+stopList+"); background:linear-gradient(to bottom,"+stopList+"); ");c.find("div.cp_hue").on("mousedown touchstart",P);b.newColor=c.find("div.cp_new_color");b.currentColor=c.find("div.cp_current_color");c.data("cp",b);h(b.color,c.get(0));g(b.color,c.get(0));n(b.color,c.get(0));s(b.color,c.get(0));r(b.color,c.get(0));y(b.color,c.get(0));z(b.color,c.get(0));b.flat?(c.appendTo(this).show(),c.css({position:"relative",display:"block"})):(c.appendTo(document.body),e(this).on(b.showEvent,M),c.css({position:"absolute"}))}})},showPicker:function(){return this.each(function(){e(this).data("cpId")&&M.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("cpId")&&e("#"+e(this).data("cpId")).hide()})},setColor:function(a,b){b="undefined"===typeof b?1:b;if("string"==typeof a)a=I(a);else if(void 0!=a.r&&void 0!=a.g&&void 0!=a.b)a=w(a);else if(void 0!=a.h&&void 0!=a.s&&void 0!=a.b)a=c(a);else return this;return this.each(function(){if(e(this).data("cpId")){var c=e("#"+e(this).data("cpId"));c.data("cp").color=a;c.data("cp").origColor=a;h(a,c.get(0));g(a,c.get(0));n(a,c.get(0));s(a,c.get(0));r(a,c.get(0));z(a,c.get(0));c.data("cp").onChange.apply(c.parent(),[a,t(a),v(a),c.data("cp").el,1]);b&&y(a,c.get(0))}})}}}(),g=function(e){e=parseInt(-1<e.indexOf("#")?e.substring(1):e,16);return{r:e>>16,g:(e&65280)>>8,b:e&255}},I=function(e){return w(g(e))},w=function(e){var h={h:0,s:0,b:0},g=Math.min(e.r,e.g,e.b),n=Math.max(e.r,e.g,e.b),g=n-g;h.b=n;h.s=0!=n?255*g/n:0;h.h=0!=h.s?e.r==n?(e.g-e.b)/g:e.g==n?2+(e.b-e.r)/g:4+(e.r-e.g)/g:-1;h.h*=60;0>h.h&&(h.h+=360);h.s*=100/255;h.b*=100/255;return h},v=function(e){var h,g,n;h=e.h;var r=255*e.s/100;e=255*e.b/100;if(0==r)h=g=n=e;else{var r=(255-r)*e/255,s=h%60*(e-r)/60;360==h&&(h=0);60>h?(h=e,n=r,g=r+s):120>h?(g=e,n=r,h=e-s):180>h?(g=e,h=r,n=r+s):240>h?(n=e,h=r,g=e-s):300>h?(n=e,g=r,h=r+s):360>h?(h=e,g=r,n=e-s):n=g=h=0}return{r:Math.round(h),g:Math.round(g),b:Math.round(n)}},J=function(g){var h=[g.r.toString(16),g.g.toString(16),g.b.toString(16)];e.each(h,function(e,g){1==g.length&&(h[e]="0"+g)});return h.join("")},t=function(e){return J(v(e))};e.fn.extend({cp:H.init,cpHide:H.hidePicker,cpShow:H.showPicker,cpSetColor:H.setColor});e.extend({cp:{rgbToHex:J,rgbToHsb:w,hsbToHex:t,hsbToRgb:v,hexToHsb:I,hexToRgb:g}})})(jQuery);